<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>pylab.dynamics API documentation</title>
    <meta name="description" content="This module is for specifying dynamics. Additionally, we can integrate the 
dynamics with the functi..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#pylab.dynamics.integrate">integrate</a></li>
    <li class="mono"><a href="#pylab.dynamics.isdynamics">isdynamics</a></li>
    <li class="mono"><a href="#pylab.dynamics.isintegratable">isintegratable</a></li>
    <li class="mono"><a href="#pylab.dynamics.isprocessvariance">isprocessvariance</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#pylab.dynamics.BaseDynamics">BaseDynamics</a></span>
        
          
  <ul>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.__init__">__init__</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.finish_integration">finish_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.init_integration">init_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.integrate">integrate</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.integrate_single_timestep">integrate_single_timestep</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseDynamics.stability">stability</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#pylab.dynamics.BaseProcessVariance">BaseProcessVariance</a></span>
        
          
  <ul>
    <li class="mono"><a href="#pylab.dynamics.BaseProcessVariance.__init__">__init__</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseProcessVariance.finish_integration">finish_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseProcessVariance.init_integration">init_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.BaseProcessVariance.integrate_single_timestep">integrate_single_timestep</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#pylab.dynamics.Integratable">Integratable</a></span>
        
          
  <ul>
    <li class="mono"><a href="#pylab.dynamics.Integratable.__init__">__init__</a></li>
    <li class="mono"><a href="#pylab.dynamics.Integratable.finish_integration">finish_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.Integratable.init_integration">init_integration</a></li>
    <li class="mono"><a href="#pylab.dynamics.Integratable.integrate_single_timestep">integrate_single_timestep</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">pylab.dynamics</span> module</h1>
  <p>This module is for specifying dynamics. Additionally, we can integrate the 
dynamics with the function <code>integrate</code>.</p>
<p>Changes to Make in pylab 1.0
    - Fix Negative Binomial
    - Type hinting - I think this should be super important
        * mypy?
    - Make Metropolis better
        * look at implementation in posterior
    - Distinguish between TypeError and ValueError in initializations
    - Get rid of n_otus, use len(otus) instead
    - Redo how you make the SubjsetSet - idk how but it's messy</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics" class="source">
    <pre><code>'''This module is for specifying dynamics. Additionally, we can integrate the 
dynamics with the function `integrate`.

Changes to Make in pylab 1.0
    - Fix Negative Binomial
    - Type hinting - I think this should be super important
        * mypy?
    - Make Metropolis better
        * look at implementation in posterior
    - Distinguish between TypeError and ValueError in initializations
    - Get rid of n_otus, use len(otus) instead
    - Redo how you make the SubjsetSet - idk how but it's messy
'''
import numpy as np
import numpy.random as npr
import sys
import time
import logging
import math

from . import util as plu
from . import random as plr
from . import base as plb
from . import graph as plg
from .errors import NeedToImplementError, MathError


def isdynamics(x):
    '''Checks if `a` is a (subclass of) BaseDynamics

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a BaseDynamics
    '''
    return x is not None and issubclass(x.__class__, BaseDynamics)

def isprocessvariance(x):
    '''Checks if `a` is a (subclass of) ProcessVariance

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a BaseProcessVariance
    '''
    return x is not None and issubclass(x.__class__, BaseProcessVariance)

def isintegratable(x):
    '''Checks if `a` is a (subclass of) Integratable

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a Integratable
    '''
    return x is not None and issubclass(x.__class__, Integratable)

class Integratable:
    '''These are the functions needed for integrating
    '''

    def __init__(self, otus):
        if not plb.isotuset(otus):
            raise TypeError('`otus` ({}) must be an OTUSet'.format(type(otus)))
        self.otus = otus
        
    def init_integration(self):
        '''This is the function that `integrate` calls to start the integration
        '''
        pass

    def integrate_single_timestep(self, x, t, dt):
        '''This is the function that `integrate` calls to propagate the underlying
        dynamics a single time step. There is no type checking for computational
        efficiency

        Parameters
        ----------
        x : np.ndarray((n,1))
            This is the abundance as a column vector for each OTU
        t : numeric
            This is the time point we are integrating to
        dt : numeric
            This is the amount of time from the previous time point we
            are integrating from
        '''
        raise NeedToImplementError('User needs to implement this function')

    def finish_integration(self):
        '''This is the function that
        '''
        pass


class BaseDynamics(Integratable):
    '''This is the base class for the dynamics
    '''
    def __init__(self, **kwargs):
        Integratable.__init__(self, **kwargs)

    def stability(self):
        raise NeedToImplementError('User needs to implement this function')

    def integrate(self, *args, **kwargs):
        return integrate(dynamics=self, *args, **kwargs)


class BaseProcessVariance(Integratable):
    '''
    '''
    def __init__(self, *args, **kwargs):
        Integratable.__init__(self, *args, **kwargs)


class _NoProcessVariance(Integratable):
    '''This is when you do not want process variance during integration.
    For inner use only.
    '''
    def __init__(self, *args, **kwargs):
        Integratable.__init__(self, *args, **kwargs)

    def integrate_single_timestep(self, x, *args, **kwargs):
        '''Just return x
        '''
        return x


def integrate(dynamics, initial_conditions, dt, processvar=None,
    n_days=None, n_time_steps=None, subsample=False, times=None,
    log_every=10000):
    '''Numerically integrates the ODE given the dynamics and the initial 
    conditions. If the process variance is not None, then this integrates
    a stochastic ODE.

    Subsampling
    -----------
    If the dynamics are complex and the process variance is high, numerical
    integration with large time steps can lead to numerical instability, so we 
    integrate at smaller time steps than what our data is. This smaller time
    scale in this function is specified by `dt`.

    The total number of time steps to simulate can be given by either `n_days` 
    (how many days to simulate for) or by `n_time_steps` (how many time steps
    to simulate for). If `n_days` is specified, it is automatically converted
    to `n_time_steps` by `n_time_steps = n_days/dt`.

    We can then subsample our densely integrated trajectories with the flag
    `subsample`. If `subsample=False`, we return the whole trajectory. If
    `subsample` is True, then we must also specify `times`.

    Parameters
    ----------
    dynamics : BaseDynamics
        These are the dynamics that we want to integrate.
    processvar : BaseProcessVariance, None
        This is the process variance we want to inject into the integration.
        If None, we assume there is no process variance and it is a normal ODE
    initial_conditions : np.ndarray((n_otus,1), dtype=float)
        These are the initial conditions to integrate from. This must be a 
        column array.
    dt : float
        Time between each time step during integration
    n_time_steps : int
    n_days : float
        How many iterations to integrate for. Either `n_days` or `n_time_steps`
        needs to be specified, not both.
    subsample : bool
        If True, we subsample the integration at the time points indicated in
        `times`. If False we do not subsample
    times : int, np.ndarray((t,), dtype=numeric), None
        The meaning of `times` depends on whether `n_days` or `n_time_steps` is
        specified:
            If `n_days` is specified:
                `times` must be a list of floats/ints, where each element 
                corresponds to a time of day to take the sample at. The last time 
                point must not exceed `n_days`, each time must be >= 0, and there
                must not be duplicates.
                Example: (assuming `subsample` is True)
                    n_days = 6
                    times = [0, 0.1, 1.1, 3, 5] - This is valid
                    times = [0.1, 0, 1.1, 3, 5] - This is valid:
                        (0 is automatically reordered)
                    times = [0, 0.1, 1.1, 3, 6] - This is invalid: 
                        (6 is not inclusive)
                    times = [-0.1, 0, 1.1, 3, 5] - This is invalid:
                        (-0.1 < 0)
                    times = [0, 0, 1.1, 3, 5] - This is valid:
                        (duplicate points for `0`, but we discard 1)

                If `subsample` is True and `times` is None, we automatically 
                return 1 timepoint per day.
            If `n_time_steps` is specified:
                `times` can either be an int or a list of ints. If it is an int,
                then this indicates how many times you should return. It will
                return `times` evenly spaced time steps (starting at 0). If
                it is an array, each element corresponds to an index of which
                time step to return. The indices must be ints, must be non-repeating,
                and must be larger than 0.
                Example: (assuming `subsample` is True)
                    n_time_steps = 500

                    times = 5
                        >>> [0, 100, 200, 300, 400]
                    times = -1
                        >>> This is invalid
                    times = None
                        >>> This is invalid
                    times = [0, 150, 200, 489]
                        >>> This is valid
                    times = [0, 150, 500]
                        >>> This is invalid (500 not inclusive)
                    times = [-1, 0 , 150]
                        >>> This is invalid (-1 < 0)
                    times = [0, 0, 150, 450]
                        >>> This is valid (0 repeats, but we discard it)
                    times = [150, 0, 250, 450]
                        >>> This is valid (automatically reordered)
    log_every : int, None
        - This is how oftent o log the progress of the integration. If None, it 
          will never log

    Returns
    -------
    dict
        'X': np.ndarray((n_otus, k), dtype=float)
            The abundances for each OTU (row) for each time (column)
        'times': np.ndarray((k, ), dtype=float)
            These are the times, in days, for each column
    '''
    # Type and format checking
    if not isdynamics(dynamics):
        raise ValueError('`dynamics` ({}) must be a (subclass of) ' \
            'BaseDynamics'.format(type(dynamics)))

    if processvar is None:
        processvar = _NoProcessVariance(otus=dynamics.otus)
    elif not isprocessvariance(processvar):
        raise ValueError('`processvar` ({}) must be a (subclass of) ' \
            'BaseProcessVariance'.format(type(processvar)))

    if not plu.isarray(initial_conditions):
        raise ValueError('`initial_conditions` ({}) must be an array'.format( 
            type(initial_conditions)))
    initial_conditions = np.asarray(initial_conditions, dtype=float)
    if initial_conditions.ndim != 2:
        raise ValueError('`initial_conditions` ({}) must be a column vector'.format( 
            initial_conditions.shape))
    if initial_conditions.shape[1] != 1:
        raise ValueError('`initial_conditions` ({}) must be a column vector'.format( 
            initial_conditions.shape))
    if initial_conditions.shape[0] != len(dynamics.otus):
        raise ValueError('`initial_conditions` ({}) must have the ({}) rows ' \
            '(the number of OTUs)'.format(initial_conditions.shape[0],
            len(dynamics.otus)))

    if not plu.isnumeric(dt):
        raise ValueError('`dt` ({}) must be a numeric'.format(type(dt)))
    if dt <= 0:
        raise ValueError('`dt` ({}) must be strictly greater than 0'.format(dt))
    
    if n_days is None and n_time_steps is None:
        raise ValueError('You must specify either `n_days` or `n_time_steps`')
    if n_days is not None and n_time_steps is not None:
        raise ValueError('You must specify either `n_days` or `n_time_steps`, '\
            'not both')
    if not plu.isbool(subsample):
        raise ValueError('`subsample` ({}) must be a bool'.format(type(subsample)))
    
    if n_days is not None:
        if not plu.isnumeric(n_days):
            raise ValueError('`n_days` ({}) must be an int'.format(type(n_days)))
        if n_days <= 0:
            raise ValueError('`n_days` ({}) must be > 0'.format(n_days))
        n_timepoints_to_integrate = n_days/dt
        if n_timepoints_to_integrate - int(n_timepoints_to_integrate) != 0:
            raise ValueError('`days`/`dt` ({}) must be an int'.format(n_timepoints_to_integrate))
        n_timepoints_to_integrate = int(n_timepoints_to_integrate)
        if subsample:
            if times is None:
                times = np.arange(n_days, dtype=float)
            elif not plu.isarray(times):
                raise ValueError('If `subsample` is True, then `times` ({}) must either ' \
                    'be an array or None'.format(type(times)))
            times = np.asarray(times, dtype=float).ravel()
            times = np.unique(times)
            times = np.sort(times)
            if np.any(times < 0):
                raise ValueError('All `times` ({}) must be > 0 '.format(times))
            if np.any(times >= n_days):
                raise ValueError('All `times` ({}) must be < `n_days` ({})'.format( 
                    times, n_days))
    else:
        if not plu.isint(n_time_steps):
            raise ValueError('n_time_steps ({}) must be an int'.format(
                type(n_time_steps)))
        if n_time_steps <= 0:
            raise ValueError('`n_time_steps` ({}) must be > 0'.format(n_time_steps))
        n_timepoints_to_integrate = n_time_steps
        if subsample:
            if times is None:
                raise ValueError('If `n_time_steps` is specified, `times` must also be '\
                    'specified')
            if plu.isint(times):
                times = np.arange(0, n_time_steps, int(n_time_steps / times), dtype=int)
            elif plu.isarray(times):
                times = np.asarray(times, dtype=int).ravel()
                times = np.unique(times)
                times = np.sort(times)
                if np.any(times < 0):
                    raise ValueError('All `times` ({}) must be > 0 '.format(times))
                if np.any(times >= n_time_steps):
                    raise ValueError('All `times` ({}) must be < `n_time_steps` ({})'.format( 
                        times, n_time_steps))
            else:
                raise ValueError('Type for `times` ({}) not recognized'.format(type(times)))
    
    if log_every is None:
        log_every = float('inf')
    else:
        if not plu.isint(log_every):
            raise ValueError('`log_every` ({}) must be an int'.format(type(log_every)))
        if log_every <= 0:
            raise ValueError('`log_every` ({}) must be >= 0'.format(log_every))

    # Everything is good - initialize then start integrating
    dynamics.init_integration()
    processvar.init_integration()

    X = np.zeros(shape=(initial_conditions.shape[0], n_timepoints_to_integrate), dtype=float)
    X[:,0] = initial_conditions.ravel()

    t = 0
    prev = X[:,[0]]
    for i in range(1,n_timepoints_to_integrate):
        if i % log_every == 0:
            logging.info('Simulating {}/{}'.format(i, n_timepoints_to_integrate))
        t += dt 
        a = dynamics.integrate_single_timestep(x=prev, t=t, dt=dt)
        X[:,i] = processvar.integrate_single_timestep(x=a, t=t, dt=dt)
        prev = X[:, [i]]
    
    dynamics.finish_integration()
    processvar.finish_integration()

    if subsample:
        if n_days is not None:
            steps_per_day = int(n_timepoints_to_integrate/n_days)
            idxs = []
            for t in times:
                idxs.append(int(steps_per_day*t))

                # transform into an index
                if t != 0:
                    idxs[-1] -= 1
        else:
            idxs = times
            times = times * dt
        X = X[:, idxs]
    else:
        times = np.arange(n_timepoints_to_integrate, dtype=float) * dt

    return {'X': X, 'times': times}
</code></pre>
  </div>

  </header>

  <section id="section-items">

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="pylab.dynamics.integrate">
    <p>def <span class="ident">integrate</span>(</p><p>dynamics, initial_conditions, dt, processvar=None, n_days=None, n_time_steps=None, subsample=False, times=None, log_every=10000)</p>
    </div>
    

    
  
    <div class="desc"><p>Numerically integrates the ODE given the dynamics and the initial 
conditions. If the process variance is not None, then this integrates
a stochastic ODE.</p>
<h2>Subsampling</h2>
<p>If the dynamics are complex and the process variance is high, numerical
integration with large time steps can lead to numerical instability, so we 
integrate at smaller time steps than what our data is. This smaller time
scale in this function is specified by <code>dt</code>.</p>
<p>The total number of time steps to simulate can be given by either <code>n_days</code> 
(how many days to simulate for) or by <code>n_time_steps</code> (how many time steps
to simulate for). If <code>n_days</code> is specified, it is automatically converted
to <code>n_time_steps</code> by <code>n_time_steps = n_days/dt</code>.</p>
<p>We can then subsample our densely integrated trajectories with the flag
<code>subsample</code>. If <code>subsample=False</code>, we return the whole trajectory. If
<code>subsample</code> is True, then we must also specify <code>times</code>.</p>
<h2>Parameters</h2>
<p>dynamics : BaseDynamics
    These are the dynamics that we want to integrate.
processvar : BaseProcessVariance, None
    This is the process variance we want to inject into the integration.
    If None, we assume there is no process variance and it is a normal ODE
initial_conditions : np.ndarray((n_otus,1), dtype=float)
    These are the initial conditions to integrate from. This must be a 
    column array.
dt : float
    Time between each time step during integration
n_time_steps : int
n_days : float
    How many iterations to integrate for. Either <code>n_days</code> or <code>n_time_steps</code>
    needs to be specified, not both.
subsample : bool
    If True, we subsample the integration at the time points indicated in
    <code>times</code>. If False we do not subsample
times : int, np.ndarray((t,), dtype=numeric), None
    The meaning of <code>times</code> depends on whether <code>n_days</code> or <code>n_time_steps</code> is
    specified:
        If <code>n_days</code> is specified:
            <code>times</code> must be a list of floats/ints, where each element 
            corresponds to a time of day to take the sample at. The last time 
            point must not exceed <code>n_days</code>, each time must be &gt;= 0, and there
            must not be duplicates.
            Example: (assuming <code>subsample</code> is True)
                n_days = 6
                times = [0, 0.1, 1.1, 3, 5] - This is valid
                times = [0.1, 0, 1.1, 3, 5] - This is valid:
                    (0 is automatically reordered)
                times = [0, 0.1, 1.1, 3, 6] - This is invalid: 
                    (6 is not inclusive)
                times = [-0.1, 0, 1.1, 3, 5] - This is invalid:
                    (-0.1 &lt; 0)
                times = [0, 0, 1.1, 3, 5] - This is valid:
                    (duplicate points for <code>0</code>, but we discard 1)</p>
<pre><code>        If `subsample` is True and `times` is None, we automatically 
        return 1 timepoint per day.
    If `n_time_steps` is specified:
        `times` can either be an int or a list of ints. If it is an int,
        then this indicates how many times you should return. It will
        return `times` evenly spaced time steps (starting at 0). If
        it is an array, each element corresponds to an index of which
        time step to return. The indices must be ints, must be non-repeating,
        and must be larger than 0.
        Example: (assuming `subsample` is True)
            n_time_steps = 500

            times = 5
                &gt;&gt;&gt; [0, 100, 200, 300, 400]
            times = -1
                &gt;&gt;&gt; This is invalid
            times = None
                &gt;&gt;&gt; This is invalid
            times = [0, 150, 200, 489]
                &gt;&gt;&gt; This is valid
            times = [0, 150, 500]
                &gt;&gt;&gt; This is invalid (500 not inclusive)
            times = [-1, 0 , 150]
                &gt;&gt;&gt; This is invalid (-1 &lt; 0)
            times = [0, 0, 150, 450]
                &gt;&gt;&gt; This is valid (0 repeats, but we discard it)
            times = [150, 0, 250, 450]
                &gt;&gt;&gt; This is valid (automatically reordered)
</code></pre>
<p>log_every : int, None
    - This is how oftent o log the progress of the integration. If None, it 
      will never log</p>
<h2>Returns</h2>
<p>dict
    'X': np.ndarray((n_otus, k), dtype=float)
        The abundances for each OTU (row) for each time (column)
    'times': np.ndarray((k, ), dtype=float)
        These are the times, in days, for each column</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.integrate', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.integrate" class="source">
    <pre><code>def integrate(dynamics, initial_conditions, dt, processvar=None,
    n_days=None, n_time_steps=None, subsample=False, times=None,
    log_every=10000):
    '''Numerically integrates the ODE given the dynamics and the initial 
    conditions. If the process variance is not None, then this integrates
    a stochastic ODE.

    Subsampling
    -----------
    If the dynamics are complex and the process variance is high, numerical
    integration with large time steps can lead to numerical instability, so we 
    integrate at smaller time steps than what our data is. This smaller time
    scale in this function is specified by `dt`.

    The total number of time steps to simulate can be given by either `n_days` 
    (how many days to simulate for) or by `n_time_steps` (how many time steps
    to simulate for). If `n_days` is specified, it is automatically converted
    to `n_time_steps` by `n_time_steps = n_days/dt`.

    We can then subsample our densely integrated trajectories with the flag
    `subsample`. If `subsample=False`, we return the whole trajectory. If
    `subsample` is True, then we must also specify `times`.

    Parameters
    ----------
    dynamics : BaseDynamics
        These are the dynamics that we want to integrate.
    processvar : BaseProcessVariance, None
        This is the process variance we want to inject into the integration.
        If None, we assume there is no process variance and it is a normal ODE
    initial_conditions : np.ndarray((n_otus,1), dtype=float)
        These are the initial conditions to integrate from. This must be a 
        column array.
    dt : float
        Time between each time step during integration
    n_time_steps : int
    n_days : float
        How many iterations to integrate for. Either `n_days` or `n_time_steps`
        needs to be specified, not both.
    subsample : bool
        If True, we subsample the integration at the time points indicated in
        `times`. If False we do not subsample
    times : int, np.ndarray((t,), dtype=numeric), None
        The meaning of `times` depends on whether `n_days` or `n_time_steps` is
        specified:
            If `n_days` is specified:
                `times` must be a list of floats/ints, where each element 
                corresponds to a time of day to take the sample at. The last time 
                point must not exceed `n_days`, each time must be >= 0, and there
                must not be duplicates.
                Example: (assuming `subsample` is True)
                    n_days = 6
                    times = [0, 0.1, 1.1, 3, 5] - This is valid
                    times = [0.1, 0, 1.1, 3, 5] - This is valid:
                        (0 is automatically reordered)
                    times = [0, 0.1, 1.1, 3, 6] - This is invalid: 
                        (6 is not inclusive)
                    times = [-0.1, 0, 1.1, 3, 5] - This is invalid:
                        (-0.1 < 0)
                    times = [0, 0, 1.1, 3, 5] - This is valid:
                        (duplicate points for `0`, but we discard 1)

                If `subsample` is True and `times` is None, we automatically 
                return 1 timepoint per day.
            If `n_time_steps` is specified:
                `times` can either be an int or a list of ints. If it is an int,
                then this indicates how many times you should return. It will
                return `times` evenly spaced time steps (starting at 0). If
                it is an array, each element corresponds to an index of which
                time step to return. The indices must be ints, must be non-repeating,
                and must be larger than 0.
                Example: (assuming `subsample` is True)
                    n_time_steps = 500

                    times = 5
                        >>> [0, 100, 200, 300, 400]
                    times = -1
                        >>> This is invalid
                    times = None
                        >>> This is invalid
                    times = [0, 150, 200, 489]
                        >>> This is valid
                    times = [0, 150, 500]
                        >>> This is invalid (500 not inclusive)
                    times = [-1, 0 , 150]
                        >>> This is invalid (-1 < 0)
                    times = [0, 0, 150, 450]
                        >>> This is valid (0 repeats, but we discard it)
                    times = [150, 0, 250, 450]
                        >>> This is valid (automatically reordered)
    log_every : int, None
        - This is how oftent o log the progress of the integration. If None, it 
          will never log

    Returns
    -------
    dict
        'X': np.ndarray((n_otus, k), dtype=float)
            The abundances for each OTU (row) for each time (column)
        'times': np.ndarray((k, ), dtype=float)
            These are the times, in days, for each column
    '''
    # Type and format checking
    if not isdynamics(dynamics):
        raise ValueError('`dynamics` ({}) must be a (subclass of) ' \
            'BaseDynamics'.format(type(dynamics)))

    if processvar is None:
        processvar = _NoProcessVariance(otus=dynamics.otus)
    elif not isprocessvariance(processvar):
        raise ValueError('`processvar` ({}) must be a (subclass of) ' \
            'BaseProcessVariance'.format(type(processvar)))

    if not plu.isarray(initial_conditions):
        raise ValueError('`initial_conditions` ({}) must be an array'.format( 
            type(initial_conditions)))
    initial_conditions = np.asarray(initial_conditions, dtype=float)
    if initial_conditions.ndim != 2:
        raise ValueError('`initial_conditions` ({}) must be a column vector'.format( 
            initial_conditions.shape))
    if initial_conditions.shape[1] != 1:
        raise ValueError('`initial_conditions` ({}) must be a column vector'.format( 
            initial_conditions.shape))
    if initial_conditions.shape[0] != len(dynamics.otus):
        raise ValueError('`initial_conditions` ({}) must have the ({}) rows ' \
            '(the number of OTUs)'.format(initial_conditions.shape[0],
            len(dynamics.otus)))

    if not plu.isnumeric(dt):
        raise ValueError('`dt` ({}) must be a numeric'.format(type(dt)))
    if dt <= 0:
        raise ValueError('`dt` ({}) must be strictly greater than 0'.format(dt))
    
    if n_days is None and n_time_steps is None:
        raise ValueError('You must specify either `n_days` or `n_time_steps`')
    if n_days is not None and n_time_steps is not None:
        raise ValueError('You must specify either `n_days` or `n_time_steps`, '\
            'not both')
    if not plu.isbool(subsample):
        raise ValueError('`subsample` ({}) must be a bool'.format(type(subsample)))
    
    if n_days is not None:
        if not plu.isnumeric(n_days):
            raise ValueError('`n_days` ({}) must be an int'.format(type(n_days)))
        if n_days <= 0:
            raise ValueError('`n_days` ({}) must be > 0'.format(n_days))
        n_timepoints_to_integrate = n_days/dt
        if n_timepoints_to_integrate - int(n_timepoints_to_integrate) != 0:
            raise ValueError('`days`/`dt` ({}) must be an int'.format(n_timepoints_to_integrate))
        n_timepoints_to_integrate = int(n_timepoints_to_integrate)
        if subsample:
            if times is None:
                times = np.arange(n_days, dtype=float)
            elif not plu.isarray(times):
                raise ValueError('If `subsample` is True, then `times` ({}) must either ' \
                    'be an array or None'.format(type(times)))
            times = np.asarray(times, dtype=float).ravel()
            times = np.unique(times)
            times = np.sort(times)
            if np.any(times < 0):
                raise ValueError('All `times` ({}) must be > 0 '.format(times))
            if np.any(times >= n_days):
                raise ValueError('All `times` ({}) must be < `n_days` ({})'.format( 
                    times, n_days))
    else:
        if not plu.isint(n_time_steps):
            raise ValueError('n_time_steps ({}) must be an int'.format(
                type(n_time_steps)))
        if n_time_steps <= 0:
            raise ValueError('`n_time_steps` ({}) must be > 0'.format(n_time_steps))
        n_timepoints_to_integrate = n_time_steps
        if subsample:
            if times is None:
                raise ValueError('If `n_time_steps` is specified, `times` must also be '\
                    'specified')
            if plu.isint(times):
                times = np.arange(0, n_time_steps, int(n_time_steps / times), dtype=int)
            elif plu.isarray(times):
                times = np.asarray(times, dtype=int).ravel()
                times = np.unique(times)
                times = np.sort(times)
                if np.any(times < 0):
                    raise ValueError('All `times` ({}) must be > 0 '.format(times))
                if np.any(times >= n_time_steps):
                    raise ValueError('All `times` ({}) must be < `n_time_steps` ({})'.format( 
                        times, n_time_steps))
            else:
                raise ValueError('Type for `times` ({}) not recognized'.format(type(times)))
    
    if log_every is None:
        log_every = float('inf')
    else:
        if not plu.isint(log_every):
            raise ValueError('`log_every` ({}) must be an int'.format(type(log_every)))
        if log_every <= 0:
            raise ValueError('`log_every` ({}) must be >= 0'.format(log_every))

    # Everything is good - initialize then start integrating
    dynamics.init_integration()
    processvar.init_integration()

    X = np.zeros(shape=(initial_conditions.shape[0], n_timepoints_to_integrate), dtype=float)
    X[:,0] = initial_conditions.ravel()

    t = 0
    prev = X[:,[0]]
    for i in range(1,n_timepoints_to_integrate):
        if i % log_every == 0:
            logging.info('Simulating {}/{}'.format(i, n_timepoints_to_integrate))
        t += dt 
        a = dynamics.integrate_single_timestep(x=prev, t=t, dt=dt)
        X[:,i] = processvar.integrate_single_timestep(x=a, t=t, dt=dt)
        prev = X[:, [i]]
    
    dynamics.finish_integration()
    processvar.finish_integration()

    if subsample:
        if n_days is not None:
            steps_per_day = int(n_timepoints_to_integrate/n_days)
            idxs = []
            for t in times:
                idxs.append(int(steps_per_day*t))

                # transform into an index
                if t != 0:
                    idxs[-1] -= 1
        else:
            idxs = times
            times = times * dt
        X = X[:, idxs]
    else:
        times = np.arange(n_timepoints_to_integrate, dtype=float) * dt

    return {'X': X, 'times': times}
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="pylab.dynamics.isdynamics">
    <p>def <span class="ident">isdynamics</span>(</p><p>x)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks if <code>a</code> is a (subclass of) BaseDynamics</p>
<h2>Parameters</h2>
<p>x : any
    Instance we are checking</p>
<h2>Returns</h2>
<p>bool
    True if <code>x</code> is a subclass of a BaseDynamics</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.isdynamics', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.isdynamics" class="source">
    <pre><code>def isdynamics(x):
    '''Checks if `a` is a (subclass of) BaseDynamics

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a BaseDynamics
    '''
    return x is not None and issubclass(x.__class__, BaseDynamics)
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="pylab.dynamics.isintegratable">
    <p>def <span class="ident">isintegratable</span>(</p><p>x)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks if <code>a</code> is a (subclass of) Integratable</p>
<h2>Parameters</h2>
<p>x : any
    Instance we are checking</p>
<h2>Returns</h2>
<p>bool
    True if <code>x</code> is a subclass of a Integratable</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.isintegratable', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.isintegratable" class="source">
    <pre><code>def isintegratable(x):
    '''Checks if `a` is a (subclass of) Integratable

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a Integratable
    '''
    return x is not None and issubclass(x.__class__, Integratable)
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="pylab.dynamics.isprocessvariance">
    <p>def <span class="ident">isprocessvariance</span>(</p><p>x)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks if <code>a</code> is a (subclass of) ProcessVariance</p>
<h2>Parameters</h2>
<p>x : any
    Instance we are checking</p>
<h2>Returns</h2>
<p>bool
    True if <code>x</code> is a subclass of a BaseProcessVariance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.isprocessvariance', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.isprocessvariance" class="source">
    <pre><code>def isprocessvariance(x):
    '''Checks if `a` is a (subclass of) ProcessVariance

    Parameters
    ----------
    x : any
        Instance we are checking

    Returns
    -------
    bool
        True if `x` is a subclass of a BaseProcessVariance
    '''
    return x is not None and issubclass(x.__class__, BaseProcessVariance)
</code></pre>
  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="pylab.dynamics.BaseDynamics" class="name">class <span class="ident">BaseDynamics</span></p>
      
  
    <div class="desc"><p>This is the base class for the dynamics</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics" class="source">
    <pre><code>class BaseDynamics(Integratable):
    '''This is the base class for the dynamics
    '''
    def __init__(self, **kwargs):
        Integratable.__init__(self, **kwargs)

    def stability(self):
        raise NeedToImplementError('User needs to implement this function')

    def integrate(self, *args, **kwargs):
        return integrate(dynamics=self, *args, **kwargs)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#pylab.dynamics.BaseDynamics">BaseDynamics</a></li>
          <li><a href="#pylab.dynamics.Integratable">Integratable</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#pylab.dynamics.Integratable">Integratable</a></code>.<code><a href="#pylab.dynamics.Integratable.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.__init__', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.__init__" class="source">
    <pre><code>def __init__(self, **kwargs):
    Integratable.__init__(self, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.finish_integration">
    <p>def <span class="ident">finish_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.finish_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.finish_integration" class="source">
    <pre><code>def finish_integration(self):
    '''This is the function that
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.init_integration">
    <p>def <span class="ident">init_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to start the integration</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.init_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.init_integration" class="source">
    <pre><code>def init_integration(self):
    '''This is the function that `integrate` calls to start the integration
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.integrate">
    <p>def <span class="ident">integrate</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.integrate', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.integrate" class="source">
    <pre><code>def integrate(self, *args, **kwargs):
    return integrate(dynamics=self, *args, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.integrate_single_timestep">
    <p>def <span class="ident">integrate_single_timestep</span>(</p><p>self, x, t, dt)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to propagate the underlying
dynamics a single time step. There is no type checking for computational
efficiency</p>
<h2>Parameters</h2>
<p>x : np.ndarray((n,1))
    This is the abundance as a column vector for each OTU
t : numeric
    This is the time point we are integrating to
dt : numeric
    This is the amount of time from the previous time point we
    are integrating from</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.integrate_single_timestep', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.integrate_single_timestep" class="source">
    <pre><code>def integrate_single_timestep(self, x, t, dt):
    '''This is the function that `integrate` calls to propagate the underlying
    dynamics a single time step. There is no type checking for computational
    efficiency
    Parameters
    ----------
    x : np.ndarray((n,1))
        This is the abundance as a column vector for each OTU
    t : numeric
        This is the time point we are integrating to
    dt : numeric
        This is the amount of time from the previous time point we
        are integrating from
    '''
    raise NeedToImplementError('User needs to implement this function')
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseDynamics.stability">
    <p>def <span class="ident">stability</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseDynamics.stability', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseDynamics.stability" class="source">
    <pre><code>def stability(self):
    raise NeedToImplementError('User needs to implement this function')
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="pylab.dynamics.BaseProcessVariance" class="name">class <span class="ident">BaseProcessVariance</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseProcessVariance', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseProcessVariance" class="source">
    <pre><code>class BaseProcessVariance(Integratable):
    '''
    '''
    def __init__(self, *args, **kwargs):
        Integratable.__init__(self, *args, **kwargs)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#pylab.dynamics.BaseProcessVariance">BaseProcessVariance</a></li>
          <li><a href="#pylab.dynamics.Integratable">Integratable</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseProcessVariance.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#pylab.dynamics.Integratable">Integratable</a></code>.<code><a href="#pylab.dynamics.Integratable.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseProcessVariance.__init__', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseProcessVariance.__init__" class="source">
    <pre><code>def __init__(self, *args, **kwargs):
    Integratable.__init__(self, *args, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseProcessVariance.finish_integration">
    <p>def <span class="ident">finish_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseProcessVariance.finish_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseProcessVariance.finish_integration" class="source">
    <pre><code>def finish_integration(self):
    '''This is the function that
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseProcessVariance.init_integration">
    <p>def <span class="ident">init_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to start the integration</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseProcessVariance.init_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseProcessVariance.init_integration" class="source">
    <pre><code>def init_integration(self):
    '''This is the function that `integrate` calls to start the integration
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.BaseProcessVariance.integrate_single_timestep">
    <p>def <span class="ident">integrate_single_timestep</span>(</p><p>self, x, t, dt)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to propagate the underlying
dynamics a single time step. There is no type checking for computational
efficiency</p>
<h2>Parameters</h2>
<p>x : np.ndarray((n,1))
    This is the abundance as a column vector for each OTU
t : numeric
    This is the time point we are integrating to
dt : numeric
    This is the amount of time from the previous time point we
    are integrating from</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.BaseProcessVariance.integrate_single_timestep', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.BaseProcessVariance.integrate_single_timestep" class="source">
    <pre><code>def integrate_single_timestep(self, x, t, dt):
    '''This is the function that `integrate` calls to propagate the underlying
    dynamics a single time step. There is no type checking for computational
    efficiency
    Parameters
    ----------
    x : np.ndarray((n,1))
        This is the abundance as a column vector for each OTU
    t : numeric
        This is the time point we are integrating to
    dt : numeric
        This is the amount of time from the previous time point we
        are integrating from
    '''
    raise NeedToImplementError('User needs to implement this function')
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="pylab.dynamics.Integratable" class="name">class <span class="ident">Integratable</span></p>
      
  
    <div class="desc"><p>These are the functions needed for integrating</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.Integratable', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.Integratable" class="source">
    <pre><code>class Integratable:
    '''These are the functions needed for integrating
    '''

    def __init__(self, otus):
        if not plb.isotuset(otus):
            raise TypeError('`otus` ({}) must be an OTUSet'.format(type(otus)))
        self.otus = otus
        
    def init_integration(self):
        '''This is the function that `integrate` calls to start the integration
        '''
        pass

    def integrate_single_timestep(self, x, t, dt):
        '''This is the function that `integrate` calls to propagate the underlying
        dynamics a single time step. There is no type checking for computational
        efficiency

        Parameters
        ----------
        x : np.ndarray((n,1))
            This is the abundance as a column vector for each OTU
        t : numeric
            This is the time point we are integrating to
        dt : numeric
            This is the amount of time from the previous time point we
            are integrating from
        '''
        raise NeedToImplementError('User needs to implement this function')

    def finish_integration(self):
        '''This is the function that
        '''
        pass
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#pylab.dynamics.Integratable">Integratable</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.Integratable.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, otus)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.Integratable.__init__', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.Integratable.__init__" class="source">
    <pre><code>def __init__(self, otus):
    if not plb.isotuset(otus):
        raise TypeError('`otus` ({}) must be an OTUSet'.format(type(otus)))
    self.otus = otus
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.Integratable.finish_integration">
    <p>def <span class="ident">finish_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.Integratable.finish_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.Integratable.finish_integration" class="source">
    <pre><code>def finish_integration(self):
    '''This is the function that
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.Integratable.init_integration">
    <p>def <span class="ident">init_integration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to start the integration</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.Integratable.init_integration', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.Integratable.init_integration" class="source">
    <pre><code>def init_integration(self):
    '''This is the function that `integrate` calls to start the integration
    '''
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pylab.dynamics.Integratable.integrate_single_timestep">
    <p>def <span class="ident">integrate_single_timestep</span>(</p><p>self, x, t, dt)</p>
    </div>
    

    
  
    <div class="desc"><p>This is the function that <code>integrate</code> calls to propagate the underlying
dynamics a single time step. There is no type checking for computational
efficiency</p>
<h2>Parameters</h2>
<p>x : np.ndarray((n,1))
    This is the abundance as a column vector for each OTU
t : numeric
    This is the time point we are integrating to
dt : numeric
    This is the amount of time from the previous time point we
    are integrating from</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pylab.dynamics.Integratable.integrate_single_timestep', this);">Show source &equiv;</a></p>
  <div id="source-pylab.dynamics.Integratable.integrate_single_timestep" class="source">
    <pre><code>def integrate_single_timestep(self, x, t, dt):
    '''This is the function that `integrate` calls to propagate the underlying
    dynamics a single time step. There is no type checking for computational
    efficiency
    Parameters
    ----------
    x : np.ndarray((n,1))
        This is the abundance as a column vector for each OTU
    t : numeric
        This is the time point we are integrating to
    dt : numeric
        This is the amount of time from the previous time point we
        are integrating from
    '''
    raise NeedToImplementError('User needs to implement this function')
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="pylab.dynamics.Integratable.otus" class="name">var <span class="ident">otus</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
